
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Galerie</title>
    <style>
        body { font-family: Arial, sans-serif; background: #121212; color: #fff; margin: 0; padding: 20px; }
        h1 { text-align: center; color: #fff; }
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; }
        .gallery img { width: 100%; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .gallery img:hover { transform: scale(1.05); }
        .download-btn { display: block; text-align: center; margin-top: 10px; background: #1f1f1f; color: white; padding: 8px; border-radius: 5px; text-decoration: none; }
        .download-btn:hover { background: #333; }
        /* Lightbox */
        #lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            flex-direction: column;
        }
        #lightbox img {
            max-width: 90%;
            max-height: 80%;
            border: 4px solid white;
            border-radius: 8px;
        }
        .nav-btn {
            color: white;
            font-size: 2rem;
            background: rgba(0,0,0,0.5);
            border: none;
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            padding: 10px;
            cursor: pointer;
            user-select: none;
        }
        #prev-btn { left: 5%; }
        #next-btn { right: 5%; }
    </style>
</head>
<body>
    <h1>Meine Galerie</h1>
    <div class="gallery" id="gallery"></div>

    <!-- Lightbox -->
    <div id="lightbox">
        <button id="prev-btn" class="nav-btn">&#10094;</button>
        <img id="lightbox-img" src="">
        <button id="next-btn" class="nav-btn">&#10095;</button>
    </div>

    <script>
        let currentIndex = 0;
        let imageUrls = [];

        async function loadImages() {
            const response = await fetch('https://api.github.com/repos/DrachenRW/meine-galerie/contents/images');
            const files = await response.json();
            const gallery = document.getElementById('gallery');
            files.forEach((file, index) => {
                if(file.name.match(/\.(jpg|jpeg|png|gif)$/i)) {
                    imageUrls.push(file.download_url);
                    const container = document.createElement('div');
                    const image = document.createElement('img');
                    image.src = file.download_url;
                    image.addEventListener('click', () => openLightbox(index));
                    const link = document.createElement('a');
                    link.href = file.download_url;
                    link.download = file.name;
                    link.className = 'download-btn';
                    link.innerText = 'Download';
                    container.appendChild(image);
                    container.appendChild(link);
                    gallery.appendChild(container);
                }
            });
        }

        function openLightbox(index) {
            currentIndex = index;
            document.getElementById('lightbox-img').src = imageUrls[currentIndex];
            document.getElementById('lightbox').style.display = 'flex';
        }

        document.getElementById('next-btn').addEventListener('click', () => {
            currentIndex = (currentIndex + 1) % imageUrls.length;
            document.getElementById('lightbox-img').src = imageUrls[currentIndex];
        });

        document.getElementById('prev-btn').addEventListener('click', () => {
            currentIndex = (currentIndex - 1 + imageUrls.length) % imageUrls.length;
            document.getElementById('lightbox-img').src = imageUrls[currentIndex];
        });

        document.getElementById('lightbox').addEventListener('click', (e) => {
            if(e.target.id === 'lightbox') document.getElementById('lightbox').style.display = 'none';
        });

        loadImages();
    </script>
</body>
</html>
